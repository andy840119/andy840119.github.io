<!doctype html><html lang=zh-tw><head><title>[教學] 用hugo在github上面架設自己的部落格 ::
他喵的野生日常</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="前言 最近想說 是時候把手邊專案的介紹網站換成深色主題 之前是用老老的jekyll 正好是時候換換看hugo了 . 然後怕自己哪天又忘記 所以先科普一下幾"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://andy840119.github.io/posts/2021/06/hugo-with-github-page/><link rel=stylesheet href=https://andy840119.github.io/assets/style.css><link rel=stylesheet href=https://andy840119.github.io/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://andy840119.github.io/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://andy840119.github.io/img/favicon.png><link href=https://andy840119.github.io/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://andy840119.github.io/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://andy840119.github.io/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://andy840119.github.io/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://andy840119.github.io/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://andy840119.github.io/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="[教學] 用hugo在github上面架設自己的部落格"><meta name=twitter:description content="前言 最近想說 是時候把手邊專案的介紹網站換成深色主題 之前是用老老的jekyll 正好是時候換換看hugo了 . 然後怕自己哪天又忘記 所以先科普一下幾"><meta property="og:title" content="[教學] 用hugo在github上面架設自己的部落格"><meta property="og:description" content="前言 最近想說 是時候把手邊專案的介紹網站換成深色主題 之前是用老老的jekyll 正好是時候換換看hugo了 . 然後怕自己哪天又忘記 所以先科普一下幾"><meta property="og:type" content="article"><meta property="og:url" content="https://andy840119.github.io/posts/2021/06/hugo-with-github-page/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-06-14T00:00:00+00:00"><meta property="article:modified_time" content="2021-06-14T00:00:00+00:00"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=https://andy840119.github.io/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>hello friend</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/posts>文章</a></li><li><a href=/tags>標籤</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/posts>文章</a></li><li><a href=/tags>標籤</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>[教學] 用hugo在github上面架設自己的部落格</h1><div class=post-meta><span class=post-date>2021-06-14</span></div><span class=post-tags><a href=https://andy840119.github.io/tags/%E7%B6%93%E9%A9%97/>#經驗</a>&nbsp;</span><div class=post-content><h2 id=前言>前言</h2><p>最近想說</p><p>是時候把手邊專案的介紹網站換成深色主題</p><p>之前是用老老的<code>jekyll</code></p><p>正好是時候換換看<code>hugo</code>了</p><p>.</p><p>然後怕自己哪天又忘記</p><p>所以先科普一下幾種把<code>markdown</code>轉換成網頁(blog)</p><p>的工具好了</p><ul><li><code>jekyll</code>: 用ruby寫的，在github page上對新手小白有不錯的支援度</li><li><code>hexo</code>: 差不多的東西，但是用nodejs寫的</li><li><code>hugo</code>: 差不多的東西，但是是用go寫的，所以理論上編譯速度最快</li></ul><h2 id=正文>正文</h2><p><a href=https://github.com/ODOa/ODOa.github.io>https://github.com/ODOa/ODOa.github.io</a></p><p>在正式專案轉移到hugo之前，先開一個空專案試試看，方便給大家參考</p><p>首先要建立一個github帳號</p><p>然後建立一個專案，專案要命名為[username].github.io</p><p>.</p><p><a href=https://gohugo.io/getting-started/quick-start/>https://gohugo.io/getting-started/quick-start/</a></p><p>先建立一個新的hugo page</p><p>.</p><p><a href=https://github.com/ODOa/ODOa.github.io/pull/1>https://github.com/ODOa/ODOa.github.io/pull/1</a></p><p>可以參考上面提交的格式</p><p>.</p><p><a href=https://gohugo.io/getting-started/configuration/>https://gohugo.io/getting-started/configuration/</a></p><p>另外建議config.toml放到<code>config/_default/config.toml</code>底下會比較好</p><p>雖然不知道為什麼預設產出來的template會把<code>config.toml</code>放到根目錄&mldr;</p><p>.</p><p><a href=https://github.com/ODOa/ODOa.github.io/blob/main/.github/workflows/gh-pages.yml>https://github.com/ODOa/ODOa.github.io/blob/main/.github/workflows/gh-pages.yml</a></p><p>然後建立github action</p><p>建立在<code>.github/workflows/gh-pages.yml</code>內</p><p>在電腦上編輯可能會有推送不上去的情況</p><p>可以直接在github上新增這個檔案</p><p>.</p><p>保險起見不建議換檔名，因為不太確定<code>gh-pages</code>這個檔名有沒有特殊用途</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>github pages</span>

<span style=color:#f92672>on</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>branches</span>:
      - <span style=color:#ae81ff>main </span> <span style=color:#75715e># 如果有東西push到這隻branch時會觸發github action，如果你的主branch是master或是其他名稱，就自己換過去</span>
  <span style=color:#f92672>pull_request</span>: <span style=color:#75715e># 再提交PR時會觸發github action(但只會用來測試編譯有沒有過，不會正式部屬)</span>

<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-18.04</span>
    <span style=color:#f92672>steps</span>:
      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;0.83.1&#39;</span>
          <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># 建議加上去，不然有可能會收到scss編譯錯誤</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span> <span style=color:#75715e># 編譯</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.ref == &#39;refs/heads/main&#39;</span> <span style=color:#75715e>#如果有新的commit合併或是推送到main branch上，就執行deploy(如果你的主branch是master或是其他名稱，就自己換過去)</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>

</code></pre></div><p>.</p><p>github action 是從<a href=https://github.com/marketplace/actions/github-pages-action>這邊</a>參考過來的</p><p>然後<code>secrets.GITHUB_TOKEN</code>不需要設定，github會自動設定好權限</p><p>.</p><p><img src=res/2021-06-14-17-55-26.png alt></p><p><img src=res/2021-06-14-17-56-06.png alt></p><p>如果把PR合併到主branch(main)，然後進去github action確認有跑成功後</p><p>.</p><p><img src=res/2021-06-14-17-56-37.png alt></p><p>會多出一個<code>gh-pages</code>的branch</p><p>那個<code>branch</code></p><p>簡單來說，是<code>github action</code>編譯完東西後，會產生一個新的commit</p><p>然後硬塞進那個branch中</p><p>.</p><p><img src=res/2021-06-14-17-59-23.png alt></p><p>接著在到setting中</p><p>把branch換成<code>gh-pages</code></p><p>如果需套用自己的domain也可以在這邊輸入(會另外產生一個commit存進<code>.github/workflows/gh-pages.yml</code>內)</p><p>然後save</p><p>.</p><p><a href=https://odoa.github.io/>https://odoa.github.io/</a></p><p>過一小段時間，去[username].github.io中</p><p>就能看到頁面了</p><p>以上</p><p>.</p><h2 id=心得>心得</h2><p>最後再說一下心得吧</p><p>這東西有點強大，佈景主題也很多</p><p>有多國語言，會自動產生sitemap</p><p>有tag，搜尋功能很多template預設都是做好的</p><p>如果要留言板也能自己裝</p><p>完整程度不輸正規的部落格網站</p><p>.</p><p>使用submodule來管理template</p><p>可以手動確認新版本沒問題後再update submodule commit id</p><p>不會因為作者更新有問題的版本</p><p>就把自己的部落格炸了</p><p>.</p><p>如果直接撿個主題直接套來用</p><p>沒遇到坑可以用的很爽</p><p>.</p><p>但也是有不少缺點，尤其是打算自己客製化時:</p><ol><li><p>如果檔名不是<code>index.md</code>，抓相對路徑的圖片會有跑板問題</p></li><li><p>在jekyll會把<code>readme.md</code>當作<code>index.md</code>，但hugo沒辦法設定把某些檔案當作main page<br>如果是從jekyll轉移過來，需要把所有<code>readme.md</code>重新命名</p></li><li><p>同一層目錄上可以直接用不同檔案名稱當作多國語言<br>例如<code>index.md</code>，<code>index.jp.md</code><br>但如果某篇文章沒有日文版時，不會自動使用<code>index.md</code>的內容代替</p><ul><li><a href=https://github.com/gohugoio/hugo/issues/4463>https://github.com/gohugoio/hugo/issues/4463</a></li><li><a href=https://github.com/gohugoio/hugo/issues/5612>https://github.com/gohugoio/hugo/issues/5612</a></li></ul><p>有些人有反應，但目前感覺作者沒想出好解法(主要是因為會產生大量重複檔案)</p></li><li><p>如果<code>content</code>目錄內有<code>index.md</code>，會造成其他檔案不會被編譯到(被這雷了好幾個小時&mldr;)</p></li><li><p>有很多樣板可以用，但每個樣板都有自己的document，如果哪天換樣板又需要重新讀document</p></li><li><p>如果遇到雷，很難判對到底是<code>hugo</code>的問題還是<code>樣板</code>的問題，建議如果遇到問題直接換另外一個主題來用</p></li></ol><p>以上</p><p>.</p><p>另外不才自己部落格目前是使用hugo-theme-hello-friend這套主題</p><p>沒碰到啥問題</p><p>.</p><p>如果中間還有遇到問題的話</p><p>也可以參考<a href=https://github.com/andy840119/andy840119.github.io>不才的部落格</a>的設定</p><p>現在已經整個轉換到hugo了</p><p>.</p></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user">Copyright &copy; 2019-2020 他喵的野生日常. Distributed by an <a href=https://github.com/andy840119>GPL V3 license.</a></div></div></footer><script src=https://andy840119.github.io/assets/main.js></script><script src=https://andy840119.github.io/assets/prism.js></script><script>for(var links=document.getElementsByTagName('a'),hrefs=[],i=0;i<links.length;i++){const a=links[i],d=a.innerText,b=a.getAttribute('href');if(!b)continue;if(!b.endsWith('index.md'))continue;const c=b.replace('index.md','');a.setAttribute('href',c)}</script></div><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-164533327-1','auto'),ga('send','pageview'))</script></body></html>